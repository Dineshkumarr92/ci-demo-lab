name: CI Demo Workflow

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch:
    inputs:
      reason:
        description: "Why are you running this manually?"
        required: false
        default: "Testing the workflow"

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository Code
        uses: actions/checkout@v4

      - name: Print Confirmation Message
        run: echo "GitHub Actions is working!"

      - name: List All Files in the Repository
        run: |
          echo "===== Repository File Structure ====="
          find . -not -path './.git/*' -not -name '.git' | sort
          echo "====================================="

      - name: Display Runner Environment Details
        run: |
          echo "===== Runner Info ====="
          uname -a
          echo "Shell: $SHELL"
          echo "Working Dir: $(pwd)"
          echo "User: $(whoami)"
          echo "========================"

      - name: Show Manual Trigger Reason
        env:
          REASON: ${{ github.event.inputs.reason }}
        run: |
          if [ -n "$REASON" ]; then
            echo "Manual trigger reason: $REASON"
          else
            echo "This run was triggered automatically."
          fi
